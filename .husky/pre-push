#!/bin/sh
# Enforce branch naming conventions
branch=$(git rev-parse --abbrev-ref HEAD)
if ! echo "$branch" | grep -qE "^(main|develop|feat\/|fix\/|hotfix\/|release\/|docs\/|style\/|refactor\/|perf\/|test\/|build\/|ci\/|chore\/)"; then
  echo "Branch name must start with: feat/, fix/, hotfix/, release/, docs/, style/, refactor/, perf/, test/, build/, ci/, chore/, or be main/develop"
  exit 1
fi

# Prevent direct pushes to main
if [ "$branch" = "main" ]; then
  echo "Direct pushes to main are not allowed. Please create a PR."
  exit 1
fi
